# gitlab
# Домашнее задание к занятию "09.06 Gitlab"

## Подготовка к выполнению

1. Необходимо [подготовить gitlab к работе по инструкции](https://cloud.yandex.ru/docs/tutorials/infrastructure-management/gitlab-containers)
2. Создайте свой новый проект
3. Создайте новый репозиторий в gitlab, наполните его [файлами](./repository)
4. Проект должен быть публичным, остальные настройки по желанию

## Основная часть

### DevOps

В репозитории содержится код проекта на python. Проект - RESTful API сервис. Ваша задача автоматизировать сборку образа с выполнением python-скрипта:
1. Образ собирается на основе [centos:7](https://hub.docker.com/_/centos?tab=tags&page=1&ordering=last_updated)
2. Python версии не ниже 3.7
3. Установлены зависимости: `flask` `flask-restful`
4. Создана директория `/python_api`
5. Скрипт из репозитория размещён в /python_api
6. Точка вызова: запуск скрипта
7. Если сборка происходит на ветке `master`: должен подняться pod kubernetes на основе образа `python-api`, иначе этот шаг нужно пропустить
![devops](https://user-images.githubusercontent.com/89702147/204118550-072b22b2-b242-465d-bc84-53bd53d60cfa.png)

### Product Owner

Вашему проекту нужна бизнесовая доработка: необходимо поменять JSON ответа на вызов метода GET `/rest/api/get_info`, необходимо создать Issue в котором указать:
1. Какой метод необходимо исправить
2. Текст с `{ "message": "Already started" }` на `{ "message": "Running"}`
3. Issue поставить label: feature
![prod](https://user-images.githubusercontent.com/89702147/204118558-c07a90d8-65da-4529-8c18-1f0775304706.png)

### Developer

Вам пришел новый Issue на доработку, вам необходимо:
1. Создать отдельную ветку, связанную с этим issue
2. Внести изменения по тексту из задания
3. Подготовить Merge Requst, влить необходимые изменения в `master`, проверить, что сборка прошла успешно

![dev](https://user-images.githubusercontent.com/89702147/204118559-6c6d4953-ea04-4707-a520-e051c74257d2.png)

### Tester

Разработчики выполнили новый Issue, необходимо проверить валидность изменений:
1. Поднять докер-контейнер с образом `python-api:latest` и проверить возврат метода на корректность
2. Закрыть Issue с комментарием об успешности прохождения, указав желаемый результат и фактически достигнутый
![test](https://user-images.githubusercontent.com/89702147/204118563-82fe6a2d-4e4a-4775-90ea-b7cc571b946c.png)
![test2](https://user-images.githubusercontent.com/89702147/204118645-3a2446a5-02db-4a3b-9e56-6a2661e78087.png)

## Итог

После успешного прохождения всех ролей - отправьте ссылку на ваш проект в гитлаб, как решение домашнего задания
http://62.84.115.235/gitlab-instance-5004c527/netology
login: user
pass: useruser
Создан как публичный, но выставились права как внутренний. Изменить на публичный не дает.
Создал тестовый, там аналогично.

![visibility1](https://user-images.githubusercontent.com/89702147/204118603-55479f33-d578-4a58-9fab-0dbbdecfbdb5.png)
![visibility2](https://user-images.githubusercontent.com/89702147/204118604-70d1cb50-dde5-4f68-a3f9-f8484fcac8f4.png)
![visibility3](https://user-images.githubusercontent.com/89702147/204118605-3f5a7081-8623-4b32-b920-0a6dcf07b6c3.png)


### :bangbang: Не забудьте оставить GitLab рабочим после выполнения задания и погасить все ресурсы в Yandex.Cloud сразу после получения зачета по домашнему заданию.

## Необязательная часть

Автомазируйте работу тестировщика, пусть у вас будет отдельный конвейер, который автоматически поднимает контейнер и выполняет проверку, например, при помощи curl. На основе вывода - будет приниматься решение об успешности прохождения тестирования
